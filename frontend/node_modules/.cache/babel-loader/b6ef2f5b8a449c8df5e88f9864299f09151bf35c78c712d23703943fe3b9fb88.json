{"ast":null,"code":"/**\n * Format error messages from API responses for display\n * Handles both string errors and FastAPI validation error objects\n * \n * @param {*} error - Error from API response\n * @returns {string} Formatted error message\n */\nexport const formatErrorMessage = error => {\n  // If error is already a string, return it\n  if (typeof error === 'string') {\n    return error;\n  }\n\n  // If error is an array (FastAPI validation errors)\n  if (Array.isArray(error)) {\n    return error.map(err => {\n      // Format: \"field: message\"\n      const field = err.loc ? err.loc.join(' > ') : 'Field';\n      const message = err.msg || 'Validation error';\n      return `${field}: ${message}`;\n    }).join(', ');\n  }\n\n  // If error is an object with a message property\n  if (error && typeof error === 'object') {\n    if (error.message) return error.message;\n    if (error.msg) return error.msg;\n    if (error.detail) return formatErrorMessage(error.detail);\n    // Try to stringify the object as last resort\n    try {\n      return JSON.stringify(error);\n    } catch {\n      return 'An error occurred';\n    }\n  }\n\n  // Default fallback\n  return 'An unexpected error occurred';\n};\n\n/**\n * Extract and format error from axios error response\n * \n * @param {*} err - Axios error object\n * @param {string} fallbackMessage - Default message if error cannot be extracted\n * @returns {string} Formatted error message\n */\nexport const getErrorMessage = (err, fallbackMessage = 'An error occurred') => {\n  if (!err) return fallbackMessage;\n\n  // Check for response data\n  if (err.response && err.response.data) {\n    const {\n      detail,\n      message,\n      error\n    } = err.response.data;\n\n    // Try detail first (FastAPI standard)\n    if (detail) {\n      return formatErrorMessage(detail);\n    }\n\n    // Try message\n    if (message) {\n      return formatErrorMessage(message);\n    }\n\n    // Try error\n    if (error) {\n      return formatErrorMessage(error);\n    }\n  }\n\n  // Check for error message directly\n  if (err.message) {\n    return err.message;\n  }\n  return fallbackMessage;\n};","map":{"version":3,"names":["formatErrorMessage","error","Array","isArray","map","err","field","loc","join","message","msg","detail","JSON","stringify","getErrorMessage","fallbackMessage","response","data"],"sources":["/Users/ilhem/Documents/INEW 2332 Comprehensive Software Project/marine-retrofit/frontend/src/utils/errorHandler.js"],"sourcesContent":["/**\n * Format error messages from API responses for display\n * Handles both string errors and FastAPI validation error objects\n * \n * @param {*} error - Error from API response\n * @returns {string} Formatted error message\n */\nexport const formatErrorMessage = (error) => {\n  // If error is already a string, return it\n  if (typeof error === 'string') {\n    return error;\n  }\n\n  // If error is an array (FastAPI validation errors)\n  if (Array.isArray(error)) {\n    return error.map(err => {\n      // Format: \"field: message\"\n      const field = err.loc ? err.loc.join(' > ') : 'Field';\n      const message = err.msg || 'Validation error';\n      return `${field}: ${message}`;\n    }).join(', ');\n  }\n\n  // If error is an object with a message property\n  if (error && typeof error === 'object') {\n    if (error.message) return error.message;\n    if (error.msg) return error.msg;\n    if (error.detail) return formatErrorMessage(error.detail);\n    // Try to stringify the object as last resort\n    try {\n      return JSON.stringify(error);\n    } catch {\n      return 'An error occurred';\n    }\n  }\n\n  // Default fallback\n  return 'An unexpected error occurred';\n};\n\n/**\n * Extract and format error from axios error response\n * \n * @param {*} err - Axios error object\n * @param {string} fallbackMessage - Default message if error cannot be extracted\n * @returns {string} Formatted error message\n */\nexport const getErrorMessage = (err, fallbackMessage = 'An error occurred') => {\n  if (!err) return fallbackMessage;\n  \n  // Check for response data\n  if (err.response && err.response.data) {\n    const { detail, message, error } = err.response.data;\n    \n    // Try detail first (FastAPI standard)\n    if (detail) {\n      return formatErrorMessage(detail);\n    }\n    \n    // Try message\n    if (message) {\n      return formatErrorMessage(message);\n    }\n    \n    // Try error\n    if (error) {\n      return formatErrorMessage(error);\n    }\n  }\n  \n  // Check for error message directly\n  if (err.message) {\n    return err.message;\n  }\n  \n  return fallbackMessage;\n};"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMA,kBAAkB,GAAIC,KAAK,IAAK;EAC3C;EACA,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IAC7B,OAAOA,KAAK;EACd;;EAEA;EACA,IAAIC,KAAK,CAACC,OAAO,CAACF,KAAK,CAAC,EAAE;IACxB,OAAOA,KAAK,CAACG,GAAG,CAACC,GAAG,IAAI;MACtB;MACA,MAAMC,KAAK,GAAGD,GAAG,CAACE,GAAG,GAAGF,GAAG,CAACE,GAAG,CAACC,IAAI,CAAC,KAAK,CAAC,GAAG,OAAO;MACrD,MAAMC,OAAO,GAAGJ,GAAG,CAACK,GAAG,IAAI,kBAAkB;MAC7C,OAAO,GAAGJ,KAAK,KAAKG,OAAO,EAAE;IAC/B,CAAC,CAAC,CAACD,IAAI,CAAC,IAAI,CAAC;EACf;;EAEA;EACA,IAAIP,KAAK,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;IACtC,IAAIA,KAAK,CAACQ,OAAO,EAAE,OAAOR,KAAK,CAACQ,OAAO;IACvC,IAAIR,KAAK,CAACS,GAAG,EAAE,OAAOT,KAAK,CAACS,GAAG;IAC/B,IAAIT,KAAK,CAACU,MAAM,EAAE,OAAOX,kBAAkB,CAACC,KAAK,CAACU,MAAM,CAAC;IACzD;IACA,IAAI;MACF,OAAOC,IAAI,CAACC,SAAS,CAACZ,KAAK,CAAC;IAC9B,CAAC,CAAC,MAAM;MACN,OAAO,mBAAmB;IAC5B;EACF;;EAEA;EACA,OAAO,8BAA8B;AACvC,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMa,eAAe,GAAGA,CAACT,GAAG,EAAEU,eAAe,GAAG,mBAAmB,KAAK;EAC7E,IAAI,CAACV,GAAG,EAAE,OAAOU,eAAe;;EAEhC;EACA,IAAIV,GAAG,CAACW,QAAQ,IAAIX,GAAG,CAACW,QAAQ,CAACC,IAAI,EAAE;IACrC,MAAM;MAAEN,MAAM;MAAEF,OAAO;MAAER;IAAM,CAAC,GAAGI,GAAG,CAACW,QAAQ,CAACC,IAAI;;IAEpD;IACA,IAAIN,MAAM,EAAE;MACV,OAAOX,kBAAkB,CAACW,MAAM,CAAC;IACnC;;IAEA;IACA,IAAIF,OAAO,EAAE;MACX,OAAOT,kBAAkB,CAACS,OAAO,CAAC;IACpC;;IAEA;IACA,IAAIR,KAAK,EAAE;MACT,OAAOD,kBAAkB,CAACC,KAAK,CAAC;IAClC;EACF;;EAEA;EACA,IAAII,GAAG,CAACI,OAAO,EAAE;IACf,OAAOJ,GAAG,CAACI,OAAO;EACpB;EAEA,OAAOM,eAAe;AACxB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}